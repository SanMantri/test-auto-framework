# Data Flow Diagrams (DFD)

## Document Information
| Attribute | Value |
|-----------|-------|
| Version | 1.0 |
| Scope | All Domains |
| Dependencies | Master HLD, All LLDs |

---

## 1. Framework Data Flow Overview

### 1.1 Level 0: Context Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           LEVEL 0: CONTEXT DIAGRAM                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│   ┌─────────────┐                                              ┌─────────────┐          │
│   │             │        Test Configuration                    │             │          │
│   │   CI/CD     │─────────────────────────────────────────────▶│             │          │
│   │   System    │                                              │             │          │
│   │             │◀─────────────────────────────────────────────│             │          │
│   └─────────────┘        Test Reports + Artifacts              │             │          │
│                                                                │             │          │
│                                                                │             │          │
│   ┌─────────────┐                                              │    TEST     │          │
│   │             │        Test Data + Seed Scripts              │ AUTOMATION  │          │
│   │  Test Data  │─────────────────────────────────────────────▶│ FRAMEWORK   │          │
│   │   Sources   │                                              │             │          │
│   │             │                                              │             │          │
│   └─────────────┘                                              │             │          │
│                                                                │             │          │
│                                                                │             │          │
│   ┌─────────────┐        API Requests + Responses              │             │          │
│   │             │◀────────────────────────────────────────────▶│             │          │
│   │   System    │                                              │             │          │
│   │   Under     │        Browser Automation Commands           │             │          │
│   │   Test      │◀────────────────────────────────────────────▶│             │          │
│   │             │                                              │             │          │
│   └─────────────┘                                              └─────────────┘          │
│                                                                       │                 │
│                                                                       │                 │
│                                                                       ▼                 │
│                                                                ┌─────────────┐          │
│                                                                │             │          │
│                                                                │  Reporting  │          │
│                                                                │   Systems   │          │
│                                                                │             │          │
│                                                                └─────────────┘          │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 1.2 Level 1: Main Processes

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           LEVEL 1: MAIN PROCESSES                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌──────────────────────────────────────────────────────────────────────────────────┐   │
│  │                            TEST AUTOMATION FRAMEWORK                              │   │
│  │                                                                                   │   │
│  │                                                                                   │   │
│  │  ┌─────────────┐      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐ │   │
│  │  │             │      │             │      │             │      │             │ │   │
│  │  │     1.0     │      │     2.0     │      │     3.0     │      │     4.0     │ │   │
│  │  │   CONFIG    │─────▶│   SETUP     │─────▶│   EXECUTE   │─────▶│   REPORT    │ │   │
│  │  │   MANAGER   │      │   MANAGER   │      │   ENGINE    │      │   GENERATOR │ │   │
│  │  │             │      │             │      │             │      │             │ │   │
│  │  └──────┬──────┘      └──────┬──────┘      └──────┬──────┘      └──────┬──────┘ │   │
│  │         │                    │                    │                    │        │   │
│  │         │                    │                    │                    │        │   │
│  │         ▼                    ▼                    ▼                    ▼        │   │
│  │  ┌─────────────────────────────────────────────────────────────────────────┐   │   │
│  │  │                           DATA STORES                                    │   │   │
│  │  │                                                                          │   │   │
│  │  │  ┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐            │   │   │
│  │  │  │  Config   │  │   Auth    │  │   Test    │  │  Report   │            │   │   │
│  │  │  │   Store   │  │   State   │  │   Data    │  │   Store   │            │   │   │
│  │  │  │           │  │   Cache   │  │   Cache   │  │           │            │   │   │
│  │  │  └───────────┘  └───────────┘  └───────────┘  └───────────┘            │   │   │
│  │  │                                                                          │   │   │
│  │  └─────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                   │   │
│  └──────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│                                                                                          │
│  PROCESS DESCRIPTIONS:                                                                   │
│  ─────────────────────                                                                   │
│                                                                                          │
│  1.0 CONFIG MANAGER                                                                      │
│      • Loads environment configuration (dev, staging, prod)                              │
│      • Manages browser settings (headless, viewport, etc.)                               │
│      • Configures parallel execution parameters                                          │
│                                                                                          │
│  2.0 SETUP MANAGER                                                                       │
│      • Performs authentication (once per suite)                                          │
│      • Initializes browser and context pools                                            │
│      • Seeds test data via APIs                                                          │
│      • Stores auth state for reuse                                                      │
│                                                                                          │
│  3.0 EXECUTE ENGINE                                                                      │
│      • Runs tests in parallel threads                                                   │
│      • Manages browser context per test                                                 │
│      • Captures screenshots, logs, traces                                               │
│      • Handles retries and error recovery                                               │
│                                                                                          │
│  4.0 REPORT GENERATOR                                                                    │
│      • Aggregates test results                                                           │
│      • Generates Allure reports                                                          │
│      • Attaches artifacts (screenshots, traces)                                          │
│      • Publishes to dashboards                                                           │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Test Execution Data Flow

### 2.1 Complete Test Lifecycle Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          TEST LIFECYCLE DATA FLOW                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  PHASE 1: SUITE INITIALIZATION                                                           │
│  ─────────────────────────────                                                           │
│                                                                                          │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐         │
│  │   Config    │      │   @Before   │      │   API       │      │   Auth      │         │
│  │   Files     │─────▶│   Suite     │─────▶│   Login     │─────▶│   State     │         │
│  │   (.yaml)   │      │             │      │             │      │   Store     │         │
│  └─────────────┘      └─────────────┘      └─────────────┘      └─────────────┘         │
│                              │                                         │                 │
│                              │                                         │                 │
│                              ▼                                         ▼                 │
│                       ┌─────────────┐                           ┌─────────────┐         │
│                       │   Browser   │                           │  Global     │         │
│                       │   Launch    │                           │  Data       │         │
│                       │             │                           │  Cache      │         │
│                       └─────────────┘                           └─────────────┘         │
│                              │                                                           │
│                              ▼                                                           │
│                       ┌─────────────┐                                                   │
│                       │   Context   │                                                   │
│                       │   Pool      │                                                   │
│                       │   Init      │                                                   │
│                       └─────────────┘                                                   │
│                                                                                          │
│  ═══════════════════════════════════════════════════════════════════════════════════   │
│                                                                                          │
│  PHASE 2: TEST EXECUTION (Per Test)                                                     │
│  ──────────────────────────────────                                                      │
│                                                                                          │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐      │
│  │ @Before  │     │ Create   │     │ Inject   │     │ API      │     │ Store in │      │
│  │ Method   │────▶│ Context  │────▶│ Auth     │────▶│ Setup    │────▶│ TestData │      │
│  │          │     │          │     │ State    │     │ Data     │     │ Cache    │      │
│  └──────────┘     └──────────┘     └──────────┘     └──────────┘     └──────────┘      │
│       │                                                                    │             │
│       │                                                                    │             │
│       ▼                                                                    ▼             │
│  ┌────────────────────────────────────────────────────────────────────────────────┐    │
│  │                              @Test Method                                       │    │
│  │                                                                                 │    │
│  │   ┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐            │    │
│  │   │  Read     │    │  Page     │    │  UI       │    │  API      │            │    │
│  │   │  TestData │───▶│  Navigate │───▶│  Actions  │───▶│  Verify   │            │    │
│  │   │  Cache    │    │           │    │           │    │           │            │    │
│  │   └───────────┘    └───────────┘    └───────────┘    └───────────┘            │    │
│  │                                           │                │                   │    │
│  │                                           ▼                ▼                   │    │
│  │                                    ┌───────────┐    ┌───────────┐            │    │
│  │                                    │ Capture   │    │ Assertions │            │    │
│  │                                    │ Logs/     │    │ Results    │            │    │
│  │                                    │ Screens   │    │            │            │    │
│  │                                    └───────────┘    └───────────┘            │    │
│  │                                                                                 │    │
│  └────────────────────────────────────────────────────────────────────────────────┘    │
│                                           │                                             │
│                                           ▼                                             │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐                                        │
│  │ @After   │     │ Close    │     │ Clear    │                                        │
│  │ Method   │────▶│ Context  │────▶│ TestData │                                        │
│  │          │     │          │     │ Cache    │                                        │
│  └──────────┘     └──────────┘     └──────────┘                                        │
│                                                                                          │
│  ═══════════════════════════════════════════════════════════════════════════════════   │
│                                                                                          │
│  PHASE 3: SUITE TEARDOWN                                                                │
│  ───────────────────────                                                                 │
│                                                                                          │
│  ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐                       │
│  │ @After   │     │ Close    │     │ Generate │     │ Publish  │                       │
│  │ Suite    │────▶│ Browser  │────▶│ Reports  │────▶│ Artifacts│                       │
│  │          │     │          │     │          │     │          │                       │
│  └──────────┘     └──────────┘     └──────────┘     └──────────┘                       │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. Authentication Data Flow

### 3.1 Single Sign-On Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                        AUTHENTICATION DATA FLOW                                          │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ONCE PER TEST SUITE:                                                                   │
│  ─────────────────────                                                                   │
│                                                                                          │
│      ┌───────────────────────────────────────────────────────────────────────────────┐  │
│      │                         Authentication Manager                                 │  │
│      │                                                                                │  │
│      │  ┌─────────────┐                                      ┌─────────────────────┐ │  │
│      │  │  Credentials │                                      │    Storage State    │ │  │
│      │  │  ───────────│                                      │    ───────────────  │ │  │
│      │  │ • username  │                                      │ {                   │ │  │
│      │  │ • password  │                                      │   "cookies": [...], │ │  │
│      │  │ • API key   │                                      │   "localStorage": { │ │  │
│      │  └──────┬──────┘                                      │     "token": "..."  │ │  │
│      │         │                                             │   }                  │ │  │
│      │         │                                             │ }                    │ │  │
│      │         │        ┌─────────────────┐                  └──────────┬──────────┘ │  │
│      │         │        │                 │                             │            │  │
│      │         └───────▶│   POST /login   │────────────────────────────▶│            │  │
│      │                  │   (API Call)    │      Extract cookies        │            │  │
│      │                  │                 │      + tokens               │            │  │
│      │                  └─────────────────┘                             │            │  │
│      │                                                                  │            │  │
│      └──────────────────────────────────────────────────────────────────┼────────────┘  │
│                                                                         │               │
│                                                                         │               │
│                                                                         ▼               │
│                                                              ┌─────────────────────┐   │
│                                                              │   auth-state.json   │   │
│                                                              │   ─────────────────  │   │
│                                                              │   Persisted to disk │   │
│                                                              │   for reuse across  │   │
│                                                              │   test runs         │   │
│                                                              └─────────────────────┘   │
│                                                                         │               │
│                                                                         │               │
│  PER TEST:                                                              │               │
│  ─────────                                                              │               │
│                                                                         │               │
│      ┌───────────────────────────────────────────────────────────────────────────────┐  │
│      │                           Browser Context                                      │  │
│      │                                                                                │  │
│      │     ┌─────────────┐              ┌─────────────────┐              ┌────────┐ │  │
│      │     │   Read      │              │  newContext()   │              │ Ready  │ │  │
│      │     │   Storage   │─────────────▶│  with storage   │─────────────▶│ State  │ │  │
│      │     │   State     │              │  state          │              │        │ │  │
│      │     └─────────────┘◀─────────────└─────────────────┘              └────────┘ │  │
│      │            ▲                                                          │       │  │
│      │            │                                                          │       │  │
│      │            └──────────────────────────────────────────────────────────┘       │  │
│      │                                                                                │  │
│      │     Result: Page loads in authenticated state                                 │  │
│      │             No login required                                                  │  │
│      │             50ms vs 15 seconds                                                │  │
│      │                                                                                │  │
│      └───────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Domain-Specific Data Flows

### 4.1 Payments Domain Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          PAYMENTS DOMAIN DATA FLOW                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌──────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              HYBRID PAYMENT TEST FLOW                             │   │
│  │                                                                                   │   │
│  │                                                                                   │   │
│  │    API LAYER                          UI LAYER                     API LAYER     │   │
│  │    ─────────                          ────────                     ─────────     │   │
│  │                                                                                   │   │
│  │    ┌─────────┐    Product IDs    ┌─────────────┐                               │   │
│  │    │ Product │───────────────────▶│  Cart API   │                               │   │
│  │    │ Catalog │                    │  Client     │                               │   │
│  │    └─────────┘                    └──────┬──────┘                               │   │
│  │                                          │                                        │   │
│  │                                          │ cartId, total                          │   │
│  │                                          ▼                                        │   │
│  │                                   ┌─────────────┐                               │   │
│  │                                   │  TestData   │                               │   │
│  │                                   │  Cache      │                               │   │
│  │                                   └──────┬──────┘                               │   │
│  │                                          │                                        │   │
│  │                                          │ cartId, expected total                 │   │
│  │                                          ▼                                        │   │
│  │                                   ┌─────────────┐                               │   │
│  │                                   │  Checkout   │                               │   │
│  │                                   │  Page       │                               │   │
│  │                                   └──────┬──────┘                               │   │
│  │                                          │                                        │   │
│  │                                          │ navigate, select address               │   │
│  │                                          ▼                                        │   │
│  │                                   ┌─────────────┐                               │   │
│  │                                   │  Payment    │                               │   │
│  │                                   │  Page       │                               │   │
│  │                                   └──────┬──────┘                               │   │
│  │                                          │                                        │   │
│  │    ┌─────────┐                           │ card details, submit                  │   │
│  │    │  Test   │ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─▶│                                        │   │
│  │    │  Cards  │                           │                                        │   │
│  │    └─────────┘                           ▼                                        │   │
│  │                                   ┌─────────────┐     orderId     ┌─────────────┐│   │
│  │                                   │ Confirmation│────────────────▶│  Order API  ││   │
│  │                                   │  Page       │                 │  Client     ││   │
│  │                                   └─────────────┘                 └──────┬──────┘│   │
│  │                                                                          │        │   │
│  │                                                                          │        │   │
│  │                                                                          ▼        │   │
│  │                                                                   ┌─────────────┐│   │
│  │                                                                   │  Verify     ││   │
│  │                                                                   │  Order in   ││   │
│  │                                                                   │  Database   ││   │
│  │                                                                   └─────────────┘│   │
│  │                                                                                   │   │
│  └──────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
│                                                                                          │
│  DATA TRANSFORMATIONS:                                                                   │
│  ─────────────────────                                                                   │
│                                                                                          │
│  1. Product IDs → Cart with items and totals                                            │
│  2. Cart data → Cached for verification                                                  │
│  3. Card details → Payment submission                                                    │
│  4. Confirmation → Order ID extraction                                                   │
│  5. Order ID → API verification of order state                                           │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 Booking Domain Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          BOOKING DOMAIN DATA FLOW                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│    ┌───────────────────────────────────────────────────────────────────────────────┐    │
│    │                         SEAT BOOKING WITH RACE PROTECTION                      │    │
│    │                                                                                │    │
│    │                                                                                │    │
│    │    ┌─────────────────────────────────────────────────────────────────────┐   │    │
│    │    │                    API PRE-BOOKING                                   │   │    │
│    │    │                                                                      │   │    │
│    │    │    ┌─────────┐        ┌─────────┐        ┌─────────┐               │   │    │
│    │    │    │  Show   │ query  │  Seat   │ hold   │  Lock   │               │   │    │
│    │    │    │  Finder │───────▶│  API    │───────▶│  Store  │               │   │    │
│    │    │    │         │        │         │        │         │               │   │    │
│    │    │    └─────────┘        └─────────┘        └────┬────┘               │   │    │
│    │    │         │                  │                  │                     │   │    │
│    │    │         │ showId           │ seatIds          │ lockToken           │   │    │
│    │    │         │                  │                  │                     │   │    │
│    │    │         ▼                  ▼                  ▼                     │   │    │
│    │    │    ┌──────────────────────────────────────────────────────────┐    │   │    │
│    │    │    │                    TestDataCache                          │    │   │    │
│    │    │    │  {showId, seatIds, lockToken, expectedTotal}             │    │   │    │
│    │    │    └──────────────────────────────────────────────────────────┘    │   │    │
│    │    │                                                                      │   │    │
│    │    └──────────────────────────────────────────────────────────────────────┘   │    │
│    │                                         │                                      │    │
│    │                                         │                                      │    │
│    │                                         ▼                                      │    │
│    │    ┌─────────────────────────────────────────────────────────────────────┐   │    │
│    │    │                    UI SEAT SELECTION                                 │   │    │
│    │    │                                                                      │   │    │
│    │    │    ┌─────────┐        ┌─────────┐        ┌─────────┐               │   │    │
│    │    │    │  Seat   │ load   │  Seat   │ verify │  Booking│               │   │    │
│    │    │    │  Map    │───────▶│  Visual │───────▶│  Summary│               │   │    │
│    │    │    │  Page   │        │  Select │        │  Page   │               │   │    │
│    │    │    └─────────┘        └─────────┘        └─────────┘               │   │    │
│    │    │                            │                                        │   │    │
│    │    │                            │ Pre-locked seats show as "selected"   │   │    │
│    │    │                            │ (synced from API lock)                 │   │    │
│    │    │                            │                                        │   │    │
│    │    └──────────────────────────────────────────────────────────────────────┘   │    │
│    │                                         │                                      │    │
│    │                                         ▼                                      │    │
│    │    ┌─────────────────────────────────────────────────────────────────────┐   │    │
│    │    │                    PAYMENT & VERIFICATION                            │   │    │
│    │    │                                                                      │   │    │
│    │    │    ┌─────────┐        ┌─────────┐        ┌─────────┐               │   │    │
│    │    │    │ Payment │ pay    │ Ticket  │ verify │ Booking │               │   │    │
│    │    │    │  Page   │───────▶│  Page   │───────▶│  API    │               │   │    │
│    │    │    │         │        │         │        │         │               │   │    │
│    │    │    └─────────┘        └─────────┘        └─────────┘               │   │    │
│    │    │                            │                                        │   │    │
│    │    │                            │ bookingId, ticketData                  │   │    │
│    │    │                            │                                        │   │    │
│    │    │                            ▼                                        │   │    │
│    │    │                      ┌─────────────┐                               │   │    │
│    │    │                      │  Assertion  │                               │   │    │
│    │    │                      │  status=OK  │                               │   │    │
│    │    │                      └─────────────┘                               │   │    │
│    │    │                                                                      │   │    │
│    │    └──────────────────────────────────────────────────────────────────────┘   │    │
│    │                                                                                │    │
│    └───────────────────────────────────────────────────────────────────────────────┘    │
│                                                                                          │
│                                                                                          │
│    ON FAILURE:                                                                           │
│    ───────────                                                                           │
│                                                                                          │
│    ┌─────────────┐      lockToken      ┌─────────────┐                                 │
│    │  @After     │────────────────────▶│  Release    │                                 │
│    │  Method     │                     │  Seat API   │                                 │
│    │             │                     │             │                                 │
│    └─────────────┘                     └─────────────┘                                 │
│                                                                                          │
│    Seats are released back to pool if test fails                                        │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 4.3 Playbook Domain Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          PLAYBOOK DOMAIN DATA FLOW                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         PLAYBOOK CREATION TEST FLOW                                │  │
│  │                                                                                    │  │
│  │                                                                                    │  │
│  │    ┌─────────────┐           ┌─────────────┐           ┌─────────────┐           │  │
│  │    │  Playbook   │  trigger  │   Action    │  actions  │  Condition  │           │  │
│  │    │  Builder    │──────────▶│   Palette   │──────────▶│   Logic     │           │  │
│  │    │  Page       │           │   (Drag)    │           │   Config    │           │  │
│  │    └──────┬──────┘           └─────────────┘           └──────┬──────┘           │  │
│  │           │                                                   │                   │  │
│  │           │ Playbook JSON Definition                          │                   │  │
│  │           │                                                   │                   │  │
│  │           ▼                                                   ▼                   │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                         Playbook API                                     │   │  │
│  │    │                                                                          │   │  │
│  │    │    Save: POST /api/playbooks                                            │   │  │
│  │    │    Publish: POST /api/playbooks/{id}/publish                            │   │  │
│  │    │                                                                          │   │  │
│  │    └──────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                         │                                         │  │
│  │                                         │ playbookId                              │  │
│  │                                         ▼                                         │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         PLAYBOOK EXECUTION TEST FLOW                               │  │
│  │                                                                                    │  │
│  │                                                                                    │  │
│  │    ┌─────────────┐           ┌─────────────┐           ┌─────────────┐           │  │
│  │    │   Test      │ trigger   │  Execution  │ webhook   │  Playbook   │           │  │
│  │    │   Trigger   │──────────▶│   API       │──────────▶│  Engine     │           │  │
│  │    │   Data      │           │             │           │             │           │  │
│  │    └─────────────┘           └─────────────┘           └──────┬──────┘           │  │
│  │                                                               │                   │  │
│  │                                                               │ Execute steps     │  │
│  │                                                               ▼                   │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                      Step Execution Flow                                 │   │  │
│  │    │                                                                          │   │  │
│  │    │  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐          │   │  │
│  │    │  │  Step 1  │───▶│ Condition│───▶│  Step 2  │───▶│  Step 3  │          │   │  │
│  │    │  │  (CRM)   │    │ Evaluate │    │  (Slack) │    │  (Email) │          │   │  │
│  │    │  └──────────┘    └─────┬────┘    └──────────┘    └──────────┘          │   │  │
│  │    │       │                │               │               │                │   │  │
│  │    │       │ output         │ branch        │ mock          │ mock           │   │  │
│  │    │       ▼                ▼               ▼               ▼                │   │  │
│  │    │  ┌─────────┐    ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │   │  │
│  │    │  │ Context │    │ Then/Else   │ │ MockSlack   │ │ MockEmail   │        │   │  │
│  │    │  │ Store   │    │ Selection   │ │ Server      │ │ Server      │        │   │  │
│  │    │  └─────────┘    └─────────────┘ └─────────────┘ └─────────────┘        │   │  │
│  │    │                                        │               │                │   │  │
│  │    │                                        │ capture       │ capture        │   │  │
│  │    │                                        ▼               ▼                │   │  │
│  │    │                                 ┌─────────────────────────────────┐     │   │  │
│  │    │                                 │    Captured Integrations        │     │   │  │
│  │    │                                 │    for Assertion                │     │   │  │
│  │    │                                 └─────────────────────────────────┘     │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                         │                                         │  │
│  │                                         ▼                                         │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                         Execution Result                                 │   │  │
│  │    │                                                                          │   │  │
│  │    │    { executionId, status: COMPLETED, stepResults: [...] }               │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 4.4 Dashboard Domain Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          DASHBOARD DOMAIN DATA FLOW                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         DATA ACCURACY TEST FLOW                                    │  │
│  │                                                                                    │  │
│  │                                                                                    │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                      SEED KNOWN DATA                                     │   │  │
│  │    │                                                                          │   │  │
│  │    │    ┌─────────────┐       ┌─────────────┐       ┌─────────────┐          │   │  │
│  │    │    │  Test Data  │ seed  │  Metrics    │ store │  Expected   │          │   │  │
│  │    │    │  Builder    │──────▶│  API        │──────▶│  Values     │          │   │  │
│  │    │    │             │       │             │       │  Cache      │          │   │  │
│  │    │    └─────────────┘       └─────────────┘       └──────┬──────┘          │   │  │
│  │    │                                                       │                  │   │  │
│  │    └───────────────────────────────────────────────────────┼──────────────────┘   │  │
│  │                                                            │                      │  │
│  │                                                            │ expected: 45000      │  │
│  │                                                            ▼                      │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                      CAPTURE UI VALUES                                   │   │  │
│  │    │                                                                          │   │  │
│  │    │    ┌─────────────┐       ┌─────────────┐       ┌─────────────┐          │   │  │
│  │    │    │  Dashboard  │ load  │  KPI Card   │ read  │  Actual     │          │   │  │
│  │    │    │  Page       │──────▶│  Component  │──────▶│  Values     │          │   │  │
│  │    │    │             │       │             │       │             │          │   │  │
│  │    │    └─────────────┘       └─────────────┘       └──────┬──────┘          │   │  │
│  │    │                                                       │                  │   │  │
│  │    └───────────────────────────────────────────────────────┼──────────────────┘   │  │
│  │                                                            │                      │  │
│  │                                                            │ actual: 45000        │  │
│  │                                                            ▼                      │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                      COMPARE & ASSERT                                    │   │  │
│  │    │                                                                          │   │  │
│  │    │         expected == actual (within tolerance)                            │   │  │
│  │    │                     │                                                    │   │  │
│  │    │                     ▼                                                    │   │  │
│  │    │              ┌─────────────┐                                            │   │  │
│  │    │              │   PASS ✓    │                                            │   │  │
│  │    │              └─────────────┘                                            │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         VISUAL TESTING FLOW                                        │  │
│  │                                                                                    │  │
│  │                                                                                    │  │
│  │    ┌─────────────┐       ┌─────────────┐       ┌─────────────┐                   │  │
│  │    │  Dashboard  │ load  │  Chart      │ capture│  Screenshot │                   │  │
│  │    │  Page       │──────▶│  Component  │───────▶│  (PNG)      │                   │  │
│  │    │             │       │             │        │             │                   │  │
│  │    └─────────────┘       └─────────────┘        └──────┬──────┘                   │  │
│  │                                                        │                          │  │
│  │                                                        ▼                          │  │
│  │                               ┌────────────────────────────────────────────┐      │  │
│  │                               │           Visual Comparison                │      │  │
│  │                               │                                            │      │  │
│  │    ┌─────────────┐           │    ┌─────────────┐    ┌─────────────┐     │      │  │
│  │    │  Baseline   │───────────┼───▶│   Compare   │───▶│   Diff %    │     │      │  │
│  │    │  (stored)   │           │    │   (AI/Pixel)│    │   Analysis  │     │      │  │
│  │    └─────────────┘           │    └─────────────┘    └─────────────┘     │      │  │
│  │                               │                                            │      │  │
│  │                               └────────────────────────────────────────────┘      │  │
│  │                                                        │                          │  │
│  │                                                        ▼                          │  │
│  │                                              ┌─────────────────┐                  │  │
│  │                                              │  diff < 1%      │                  │  │
│  │                                              │    → PASS       │                  │  │
│  │                                              │  diff >= 1%     │                  │  │
│  │                                              │    → FAIL + Diff│                  │  │
│  │                                              └─────────────────┘                  │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. Parallel Execution Data Flow

### 5.1 Thread Isolation

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                        PARALLEL EXECUTION DATA ISOLATION                                 │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                            SHARED (Read-Only)                                      │  │
│  │                                                                                    │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                         GlobalDataCache                                  │   │  │
│  │    │                                                                          │   │  │
│  │    │    • baseUrl                                                             │   │  │
│  │    │    • authState (storage state JSON)                                      │   │  │
│  │    │    • masterData (countries, currencies)                                  │   │  │
│  │    │    • testConfiguration                                                   │   │  │
│  │    │                                                                          │   │  │
│  │    │    Access: ConcurrentHashMap (thread-safe reads)                        │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                    │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                         Single Browser Instance                          │   │  │
│  │    │                                                                          │   │  │
│  │    │    Playwright.chromium().launch()  ←── One per JVM                      │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                          │                                               │
│                                          │ Access                                        │
│                                          ▼                                               │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                          ISOLATED (Per Thread)                                     │  │
│  │                                                                                    │  │
│  │   Thread 1                    Thread 2                    Thread N                │  │
│  │   ────────                    ────────                    ────────                │  │
│  │                                                                                    │  │
│  │   ┌─────────────┐            ┌─────────────┐            ┌─────────────┐          │  │
│  │   │ TestData    │            │ TestData    │            │ TestData    │          │  │
│  │   │ Cache       │            │ Cache       │            │ Cache       │          │  │
│  │   │             │            │             │            │             │          │  │
│  │   │ orderId: A1 │            │ orderId: B2 │            │ orderId: N9 │          │  │
│  │   │ cartId: X   │            │ cartId: Y   │            │ cartId: Z   │          │  │
│  │   └─────────────┘            └─────────────┘            └─────────────┘          │  │
│  │         │                          │                          │                   │  │
│  │         │                          │                          │                   │  │
│  │   ┌─────────────┐            ┌─────────────┐            ┌─────────────┐          │  │
│  │   │ Browser     │            │ Browser     │            │ Browser     │          │  │
│  │   │ Context 1   │            │ Context 2   │            │ Context N   │          │  │
│  │   │             │            │             │            │             │          │  │
│  │   │ cookies: [] │            │ cookies: [] │            │ cookies: [] │          │  │
│  │   │ storage: {} │            │ storage: {} │            │ storage: {} │          │  │
│  │   └──────┬──────┘            └──────┬──────┘            └──────┬──────┘          │  │
│  │          │                          │                          │                   │  │
│  │          │                          │                          │                   │  │
│  │   ┌─────────────┐            ┌─────────────┐            ┌─────────────┐          │  │
│  │   │   Page 1    │            │   Page 2    │            │   Page N    │          │  │
│  │   │             │            │             │            │             │          │  │
│  │   │ /checkout   │            │ /cart       │            │ /dashboard  │          │  │
│  │   └─────────────┘            └─────────────┘            └─────────────┘          │  │
│  │                                                                                    │  │
│  │   No shared state between threads                                                 │  │
│  │   Each test runs in complete isolation                                            │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Reporting Data Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                           REPORTING DATA FLOW                                            │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                                                                                          │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         DATA COLLECTION DURING TEST                                │  │
│  │                                                                                    │  │
│  │                                                                                    │  │
│  │    ┌─────────────┐      ┌─────────────┐      ┌─────────────┐                     │  │
│  │    │   Test      │      │   Network   │      │   Console   │                     │  │
│  │    │   Actions   │      │   Logs      │      │   Logs      │                     │  │
│  │    │             │      │             │      │             │                     │  │
│  │    │ • Steps     │      │ • Requests  │      │ • Errors    │                     │  │
│  │    │ • Assertions│      │ • Responses │      │ • Warnings  │                     │  │
│  │    │ • Duration  │      │ • Timing    │      │ • Info      │                     │  │
│  │    └──────┬──────┘      └──────┬──────┘      └──────┬──────┘                     │  │
│  │           │                    │                    │                             │  │
│  │           │                    │                    │                             │  │
│  │           └────────────────────┼────────────────────┘                             │  │
│  │                                │                                                   │  │
│  │                                ▼                                                   │  │
│  │    ┌─────────────┐      ┌─────────────┐      ┌─────────────┐                     │  │
│  │    │ Screenshots │      │   Traces    │      │   Videos    │                     │  │
│  │    │             │      │             │      │   (opt)     │                     │  │
│  │    │ • On failure│      │ • Full flow │      │ • Recorded  │                     │  │
│  │    │ • Key steps │      │ • Timeline  │      │ • On fail   │                     │  │
│  │    └──────┬──────┘      └──────┬──────┘      └──────┬──────┘                     │  │
│  │           │                    │                    │                             │  │
│  └───────────┼────────────────────┼────────────────────┼─────────────────────────────┘  │
│              │                    │                    │                                 │
│              └────────────────────┼────────────────────┘                                 │
│                                   │                                                      │
│                                   ▼                                                      │
│  ┌───────────────────────────────────────────────────────────────────────────────────┐  │
│  │                         REPORT GENERATION                                          │  │
│  │                                                                                    │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                       Allure Report Generator                            │   │  │
│  │    │                                                                          │   │  │
│  │    │    Input:                          Output:                               │   │  │
│  │    │    • Test results                  • HTML dashboard                      │   │  │
│  │    │    • Attachments                   • Pass/fail metrics                   │   │  │
│  │    │    • Categories                    • Trend graphs                        │   │  │
│  │    │    • Environment info              • Step-by-step logs                   │   │  │
│  │    │                                    • Attached artifacts                   │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                   │                                               │  │
│  │                                   ▼                                               │  │
│  │    ┌─────────────────────────────────────────────────────────────────────────┐   │  │
│  │    │                       Report Distribution                                │   │  │
│  │    │                                                                          │   │  │
│  │    │    ┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐    │   │  │
│  │    │    │   S3/     │    │   Slack   │    │   Email   │    │Dashboard  │    │   │  │
│  │    │    │   Bucket  │    │   Notify  │    │   Report  │    │   Upload  │    │   │  │
│  │    │    │           │    │           │    │           │    │           │    │   │  │
│  │    │    └───────────┘    └───────────┘    └───────────┘    └───────────┘    │   │  │
│  │    │                                                                          │   │  │
│  │    └─────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                    │  │
│  └───────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

*Document End - Data Flow Diagrams v1.0*
